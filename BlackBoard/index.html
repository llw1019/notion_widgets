<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Chalkboard</title>
  <style>
    body {
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background-color: #2e2e2e;
      color: white;
      font-family: Arial, sans-serif;
    }
    canvas {
      background-color: #333;
      border: 2px solid #222;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      cursor: crosshair;
    }
    .controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 10px;
    }
    .button {
      padding: 10px 20px;
      margin: 5px;
      background-color: #555;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    .button:hover {
      background-color: #777;
    }
    .slider-container {
      display: flex;
      align-items: center;
      margin: 10px;
    }
    .slider-container label {
      margin-right: 10px;
    }
    .slider {
      -webkit-appearance: none;
      width: 200px;
      height: 8px;
      background: #444;
      border-radius: 4px;
      outline: none;
      transition: background 0.3s;
      cursor: pointer;
    }
    .slider:hover {
      background: #555;
    }
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      background: #999;
      border-radius: 50%;
      cursor: pointer;
      transition: background 0.3s;
    }
    .slider::-webkit-slider-thumb:hover {
      background: #bbb;
    }
    .slider::-moz-range-thumb {
      width: 16px;
      height: 16px;
      background: #999;
      border-radius: 50%;
      cursor: pointer;
      transition: background 0.3s;
    }
    .slider::-moz-range-thumb:hover {
      background: #bbb;
    }
  </style>
</head>
<body>
  <div class="controls">
    <button class="button" id="toggleButton">Switch to Eraser</button>
    <div class="slider-container">
      <label for="thickness">Thickness:</label>
      <input type="range" id="thickness" class="slider" min="1" max="50" value="5">
    </div>
  </div>
  <canvas id="chalkboard" width="800" height="600"></canvas>

  <script>
    const canvas = document.getElementById('chalkboard');
    const ctx = canvas.getContext('2d');
    const toggleButton = document.getElementById('toggleButton');
    const thicknessSlider = document.getElementById('thickness');
    let drawing = false;
    let isChalk = true;
    let chalkThickness = 5;
    let eraserThickness = 20;

    // Set chalk style
    const setChalkStyle = () => {
      ctx.lineWidth = chalkThickness;
      ctx.lineJoin = 'round';
      ctx.lineCap = 'round';
      ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
      thicknessSlider.value = chalkThickness;
      toggleButton.textContent = 'Switch to Eraser';
    };

    // Set eraser style
    const setEraserStyle = () => {
      ctx.lineWidth = eraserThickness;
      ctx.lineJoin = 'round';
      ctx.lineCap = 'round';
      ctx.strokeStyle = '#333';
      thicknessSlider.value = eraserThickness;
      toggleButton.textContent = 'Switch to Chalk';
    };

    // Start drawing
    const startDrawing = (e) => {
      drawing = true;
      draw(e);
    };

    // Stop drawing
    const stopDrawing = () => {
      drawing = false;
      ctx.beginPath();
      saveToLocalStorage();
    };

    // Drawing logic
    const draw = (e) => {
      if (!drawing) return;

      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      if (isChalk) {
        // Add chalk effect
        for (let i = 0; i < 5; i++) {
          const offsetX = Math.random() * 4 - 2;
          const offsetY = Math.random() * 4 - 2;
          ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
          ctx.fillRect(x + offsetX, y + offsetY, 1, 1);
        }
      }

      ctx.lineTo(x, y);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(x, y);
    };

    // Save canvas to Local Storage
    const saveToLocalStorage = () => {
      const dataURL = canvas.toDataURL();
      localStorage.setItem('chalkboard', dataURL);
    };

    // Load canvas from Local Storage
    const loadFromLocalStorage = () => {
      const dataURL = localStorage.getItem('chalkboard');
      if (dataURL) {
        const img = new Image();
        img.src = dataURL;
        img.onload = () => ctx.drawImage(img, 0, 0);
      }
    };

    // Update thickness based on slider
    thicknessSlider.addEventListener('input', (e) => {
      const value = e.target.value;
      if (isChalk) {
        chalkThickness = value;
      } else {
        eraserThickness = value;
      }
      ctx.lineWidth = value;
    });

    // Toggle between chalk and eraser
    toggleButton.addEventListener('click', () => {
      isChalk = !isChalk;
      if (isChalk) {
        setChalkStyle();
      } else {
        setEraserStyle();
      }
    });

    // Event listeners
    canvas.addEventListener('mousedown', startDrawing);
    canvas.addEventListener('mouseup', stopDrawing);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('mouseleave', stopDrawing);

    // Initial setup
    setChalkStyle();
    loadFromLocalStorage();
  </script>
</body>
</html>
